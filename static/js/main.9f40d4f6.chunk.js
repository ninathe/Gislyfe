(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{240:function(e){e.exports={type:"FeatureCollection",features:[{type:"Feature",geometry:{type:"Polygon",coordinates:[[[10.400276200000002,63.43569279999999,0],[10.400285600000002,63.4356676,0],[10.4005766,63.4356916,0],[10.4035109,63.4357042,0],[10.4051404,63.4352681,0],[10.4051752,63.435293900000005,0],[10.4035257,63.4357269,0],[10.400572600000002,63.4357162,0],[10.400276200000002,63.43569279999999,0]]]},properties:{name:"Gryta Nord"}}]}},241:function(e){e.exports={type:"FeatureCollection",features:[{type:"Feature",geometry:{type:"Polygon",coordinates:[[[10.395119600000001,63.43492210000001,0],[10.3951464,63.4348933,0],[10.3955233,63.43496170000001,0],[10.3979198,63.43514400000001,0],[10.398271199999998,63.435136799999995,0],[10.399692799999999,63.43522620000001,0],[10.3997049,63.435204000000006,0],[10.399808100000001,63.435210600000005,0],[10.3998042,63.43523340000001,0],[10.3998483,63.4352597,0],[10.4002654,63.4352729,0],[10.4009655,63.4352148,0],[10.4036719,63.4352245,0],[10.403677200000002,63.4352018,0],[10.4037684,63.435200699999996,0],[10.403768400000002,63.43522500000001,0],[10.4051403,63.434974,0],[10.405163799999999,63.4349927,0],[10.4037684,63.43524829999999,0],[10.4009642,63.43524060000001,0],[10.4002601,63.435296300000005,0],[10.399831000000002,63.43528369999999,0],[10.3997733,63.435256100000004,0],[10.3982699,63.435161400000005,0],[10.397918500000001,63.435168,0],[10.3955099,63.4349863,0],[10.395119600000001,63.43492210000001,0]]]},properties:{name:"Gryta Syd"}}]}},242:function(e){e.exports={type:"FeatureCollection",features:[{type:"Feature",geometry:{type:"Polygon",coordinates:[[[10.4084113,63.435005999999994,0],[10.408365699999997,63.4349425,0],[10.407896300000003,63.43501200000001,0],[10.4078776,63.4349881,0],[10.4083443,63.43491970000001,0],[10.408156500000002,63.434669,0],[10.407676400000001,63.4347386,0],[10.4076549,63.434717,0],[10.408137700000001,63.4346438,0],[10.4079312,63.4343691,0],[10.4074511,63.4344447,0],[10.4074296,63.43442189999999,0],[10.4079151,63.4343451,0],[10.407764899999998,63.434147200000005,0],[10.407303600000002,63.434220399999994,0],[10.4072794,63.434196400000005,0],[10.4077515,63.4341244,0],[10.4075691,63.433886900000005,0],[10.407089000000001,63.43396599999999,0],[10.4070622,63.4339385,0],[10.407604,63.433856899999995,0],[10.4084623,63.434998799999995,0],[10.4084113,63.435005999999994,0]]]},properties:{name:"Nedre Elvehavn"}}]}},326:function(e,t,a){e.exports=a(675)},331:function(e,t,a){},337:function(e,t,a){},440:function(e,t,a){},675:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(30),i=a.n(l),o=(a(331),a(18)),s=a(19),c=a(21),u=a(20),p=a(22),d=a(236),m=a(237),y=(a(337),a(54)),h=a.n(y),f=a(240),g=a(241),b=a(242),v=a(25),E=function(e){return{type:"ADD_LAYER",layer:e}},C=0,L=["#ff1744","#2979ff","#00b8d4","#00bfa5","#ff6d00","#00bfa5","#ffd600","#d50000"];function O(e,t,a,n){return e.name||(e.name="Layer"),t&&(e.name=t),e.visible||(e.visible="visible"),e.id||(e.id="layer-"+C),e.fillColor||(e.fillColor=L[C%L.length]),e.fillOpacity=n||1,a||e.borderColor||(e.borderColor="black"),a&&(e.borderColor=null),C++,e}h.a.accessToken="pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpejY4M29iazA2Z2gycXA4N2pmbDZmangifQ.-g_vE53SD2WrJ6tFX7QHmA";var j=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={layersInMap:[],lng:10.4,lat:63.435,zoom:15},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.state,a=t.lng,n=t.lat,r=t.zoom,l=new h.a.Map({container:this.mapContainer,style:"mapbox://styles/mapbox/light-v10",center:[a,n],zoom:r});this._map=l,l.addControl(new h.a.NavigationControl),l.on("load",function(){this.addDefaultLayers()}.bind(this)),l.on("move",function(){var t=l.getCenter(),a=t.lng,n=t.lat;e.setState({lng:a.toFixed(4),lat:n.toFixed(4),zoom:l.getZoom().toFixed(2)})})}},{key:"componentDidUpdate",value:function(){this.updateMapLayers()}},{key:"updateMapLayers",value:function(e){this.deleteLayers(),this.addLayers()}},{key:"deleteLayers",value:function(){for(var e=0;e<this.state.layersInMap.length;e++)this._map.getSource(this.state.layersInMap[e].id)&&(this._map.removeLayer(this.state.layersInMap[e].id),this._map.removeSource(this.state.layersInMap[e].id)),this._map.getSource(this.state.layersInMap[e].id+"_outline")&&(this._map.removeLayer(this.state.layersInMap[e].id+"_outline"),this._map.removeSource(this.state.layersInMap[e].id+"_outline"))}},{key:"addLayers",value:function(){for(var e=0;e<this.props.layers.length;e++){var t=this.props.layers[e];t.source?this.addVectorLayer(t):this.addLayerByType(this.props.layers[e])}this.state.layersInMap=this.props.layers}},{key:"addLayerByType",value:function(e){switch(e.features?e.features[0].geometry.type:e.geometry.type){case"Polygon":case"MultiPolygon":this.addPolygonLayer(e);break;case"MultiLineString":this.addLineLayer(e);break;case"Point":this.addPointLayer(e);break;default:console.log("Unidentified layer type!!"+e.type)}}},{key:"addPointLayer",value:function(e){this._map.addLayer({id:e.id,type:"circle",source:{type:"geojson",data:e},layout:{visibility:e.visible},paint:{"circle-radius":5,"circle-color":e.fillColor,"circle-opacity":1}})}},{key:"addLineLayer",value:function(e){this._map.addLayer({id:e.name,type:"line",source:{type:"geojson",data:e},layout:{visibility:e.visible},paint:{"line-color":e.borderColor,"line-opacity":1,"line-width":2}})}},{key:"addPolygonLayer",value:function(e){var t=this._map;t.addLayer({id:e.id,type:"fill",source:{type:"geojson",data:e},layout:{visibility:e.visible},paint:{"fill-color":e.fillColor,"fill-opacity":e.fillOpacity}}),t.addLayer({id:e.id+"_outline",type:"line",source:{type:"geojson",data:e},layout:{visibility:e.visible},paint:{"line-color":e.borderColor,"line-opacity":1,"line-width":1}})}},{key:"addVectorLayer",value:function(e){this._map.addLayer({id:e.id,type:"fill",source:{type:"vector",url:e.source},"source-layer":e.sourceLayer,layout:{visibility:e.visible},paint:{"fill-color":e.fillColor,"fill-opacity":e.fillOpacity}})}},{key:"addDefaultLayers",value:function(){var e=O(b,"Nedre elvehavn",!0);this.props.addLayer(e);var t=O(f,"Gryta nord",!0);this.props.addLayer(t);var a=O(g,"Gryta syd",!0);this.props.addLayer(a)}},{key:"render",value:function(){var e=this,t=this.state;t.lng,t.lat,t.zoom;return r.a.createElement("div",{className:"map",ref:function(t){return e.mapContainer=t}})}}]),t}(n.Component),w={addLayer:E},k=Object(v.b)(function(e){return{layers:e.layers}},w)(j),S=a(27),x=a(47),N=a(5),P=a.n(N),D=a(10),F=a(113),T=a.n(F),I=a(111),_=a.n(I),M=a(112),A=a.n(M),B=a(42),R=a.n(B),V=a(68),W=a.n(V),Y=a(38),U=a.n(Y),z=a(261),G=a.n(z),J=a(262),H=a.n(J),Z=a(263),Q=a.n(Z),X=a(244),K=(a(440),Object(v.b)()(function(e){var t=e.dispatch;function a(e,t){var a=new FileReader;a.onload=function(e){try{var a=JSON.parse(e.target.result);t(O(a))}catch(n){alert("ex when trying to parse json = "+n)}},a.readAsText(e)}return r.a.createElement(X.a,{dropzoneText:"Drop Json-files here",filesLimit:8,dropZoneClass:"HalloKlasse",dropzoneParagraphClass:"TekstDrop",acceptedFiles:["application/json/*"],onDrop:function(e){a(e,function(e){t(E(e))})},onDelete:function e(n){a(n,function(a){t(e(a))})},showPreviewsInDropzone:!1})})),$=a(40),q=a.n($),ee=a(110),te=a.n(ee),ae=a(26),ne=a.n(ae),re=a(43),le=a.n(re),ie=a(46),oe=a.n(ie),se=a(109),ce=a.n(se),ue=a(255),pe=a.n(ue),de=a(256),me=a.n(de),ye=a(257),he=a.n(ye),fe=a(259),ge=a.n(fe),be=a(260),ve=a.n(be),Ee=a(253),Ce=a.n(Ee),Le=a(254),Oe=a.n(Le),je=a(165),we=a.n(je),ke=a(84),Se=a.n(ke),xe=a(258),Ne=a.n(xe),Pe=a(45),De=a.n(Pe),Fe=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={open:!1,visible:a.props.visible,layerName:a.props.name},a.handleClick=function(){a.setState(function(e){return{open:!e.open}})},a.changeFillColor=function(e){void 0!=e&&a.props.updateLayerFill(a.props.id,e)},a.changeBorderColor=function(e){void 0!=e&&a.props.updateLayerBorder(a.props.id,e)},a.updateInput=function(e){a.setState({layerName:e.target.value})},a.changeName=function(){a.props.updateLayerName(a.props.id,a.state.layerName)},a.deleteLayer=function(){window.confirm("Are you sure you want to delete the layer: "+a.props.name)&&a.props.deleteLayer(a.props.id)},a.toggleVisibility=function(e){e.stopPropagation(),a.setState(function(e){return{visible:!e.visible}}),a.props.updateLayerVisibility(a.props.id,"visible"==a.props.visible?"none":"visible")},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement(q.a,{component:"nav",className:e.root},r.a.createElement(ne.a,{button:!0,onClick:this.handleClick},r.a.createElement(le.a,null,"visible"==this.props.visible?r.a.createElement(Ce.a,{button:!0,onClick:this.toggleVisibility.bind(this)}):r.a.createElement(Oe.a,{button:!0,onClick:this.toggleVisibility})),r.a.createElement(oe.a,{inset:!0,primary:this.props.name}),this.state.open?r.a.createElement(pe.a,null):r.a.createElement(me.a,null)),r.a.createElement(ce.a,{in:this.state.open,timeout:"auto",unmountOnExit:!0},r.a.createElement(q.a,{component:"div",disablePadding:!0},r.a.createElement(ne.a,{className:e.nested},r.a.createElement(le.a,null,r.a.createElement(he.a,null)),r.a.createElement(Se.a,{onChange:this.updateInput.bind(this),id:"standard-dense",label:"Edit name",margin:"dense"}),r.a.createElement(U.a,{className:e.iconButton,"aria-label":"Change",onClick:this.changeName.bind(this)},r.a.createElement(Ne.a,null))),r.a.createElement(ne.a,{button:!0,className:e.nested},r.a.createElement(le.a,null,r.a.createElement(ge.a,null)),r.a.createElement(oe.a,{inset:!0,primary:"Fill color"}),r.a.createElement(we.a,{name:"color",defaultValue:this.props.fillColor,onChange:this.changeFillColor.bind(this)})),r.a.createElement(ne.a,{button:!0,className:e.nested},r.a.createElement(le.a,null,r.a.createElement(ve.a,null)),r.a.createElement(oe.a,{inset:!0,primary:"Border color"}),r.a.createElement(we.a,{name:"color",defaultValue:this.props.borderColor,onChange:this.changeBorderColor.bind(this)})),r.a.createElement(ne.a,{className:e.nested},r.a.createElement(De.a,{color:"secondary",className:e.button,onClick:this.deleteLayer.bind(this)},"Delete layer"),r.a.createElement(W.a,null)))))}}]),t}(r.a.Component),Te=Object(D.withStyles)(function(e){return{root:{width:"100%",maxWidth:360,backgroundColor:e.palette.background.paper},nested:{paddingLeft:4*e.spacing.unit}}})(Fe),Ie=function(e){var t=e.layers,a=e.updateLayerVisibility,n=e.updateLayerFill,l=e.updateLayerBorder,i=e.updateLayerName,o=e.deleteLayer;return r.a.createElement(r.a.Fragment,null,t.length>0?r.a.createElement(te.a,null,"LAYERS"):null,r.a.createElement(q.a,null,t.length>0?t.map(function(e){return r.a.createElement(Te,Object.assign({key:e.id,layer:e.name,updateLayerVisibility:a,updateLayerFill:n,updateLayerBorder:l,updateLayerName:i,deleteLayer:o},e))}):r.a.createElement("div",null)))},_e={updateLayerVisibility:function(e,t){return{type:"UPDATE_LAYER_VISIBILITY",layerID:e,visibility:t}},updateLayerFill:function(e,t){return{type:"UPDATE_LAYER_FILL",layerID:e,fillColor:t}},updateLayerBorder:function(e,t){return{type:"UPDATE_LAYER_BORDER",layerID:e,borderColor:t}},updateLayerName:function(e,t){return{type:"UPDATE_LAYER_NAME",layerID:e,name:t}},deleteLayer:function(e){return{type:"DELETE_LAYER",layer:e}}},Me=Object(v.b)(function(e){return{layers:e.layers}},_e)(Ie),Ae=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={open:!1},a.handleDrawerOpen=function(){a.setState({open:!0})},a.handleDrawerClose=function(){a.setState({open:!1})},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.theme,n=this.state.open;return r.a.createElement("div",{className:t.root},r.a.createElement(_.a,{position:"fixed",color:"primary",className:P()(t.appBar,Object(S.a)({},t.appBarShift,n))},r.a.createElement(A.a,{disableGutters:!n},r.a.createElement(U.a,{color:"inherit","aria-label":"Open drawer",onClick:this.handleDrawerOpen,className:P()(t.menuButton,n&&t.hide)},r.a.createElement(G.a,null)),r.a.createElement(R.a,{variant:"h6",color:"inherit",noWrap:!0},"GISLYFE"))),r.a.createElement(T.a,{className:t.drawer,variant:"persistent",anchor:"left",open:n,classes:{paper:t.drawerPaper}},r.a.createElement("div",{className:t.drawerHeader},r.a.createElement(U.a,{onClick:this.handleDrawerClose},"ltr"===a.direction?r.a.createElement(H.a,null):r.a.createElement(Q.a,null))),r.a.createElement(K,null),r.a.createElement(W.a,null),r.a.createElement(Me,null)))}}]),t}(r.a.Component),Be=Object(D.withStyles)(function(e){return{root:{display:"flex"},appBar:{transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{width:"calc(100% - ".concat(340,"px)"),marginLeft:340,transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen})},menuButton:{marginLeft:12,marginRight:20},hide:{display:"none"},drawer:{width:340,flexShrink:0},drawerPaper:{width:340},drawerHeader:Object(x.a)({display:"flex",alignItems:"center",padding:"0 8px"},e.mixins.toolbar,{justifyContent:"flex-end"}),content:{flexGrow:1,padding:3*e.spacing.unit,transition:e.transitions.create("margin",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),marginLeft:-340},contentShift:{transition:e.transitions.create("margin",{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen}),marginLeft:0}}},{withTheme:!0})(Ae),Re=a(64),Ve=a.n(Re),We=a(65),Ye=a.n(We),Ue=a(66),ze=a.n(Ue),Ge=a(67),Je=a.n(Ge),He=a(115),Ze=a.n(He),Qe=a(63),Xe=a.n(Qe),Ke=a(264),$e=a.n(Ke),qe=a(11),et=a(28),tt=a.n(et),at=a(34),nt=a.n(at),rt=a(35),lt=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).handleChange=function(e){return function(t){a.setState(Object(S.a)({},e,t.target.value))}},a.updateText=function(e){return function(t){a.setState(Object(S.a)({},e,t.target.value))}},a.state={layer:null},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"submitBuffer",value:function(){var e=this;if(null!=this.state&&this.state.layer&&this.state.bufferVal){var t=this.props.layers.filter(function(t){return t.id==e.state.layer})[0],a=rt.buffer(t,this.state.bufferVal,{units:"meters"}),n=t.name+"_Buffer";this.props.addLayer(O(a,n,!0,.5)),this.props.close()}else alert("Velg layer og bufferverdi")}},{key:"render",value:function(){var e=[r.a.createElement(qe.a,{primary:!0,form:"myform",onClick:this.submitBuffer.bind(this)},"SUBMIT")];return r.a.createElement(r.a.Fragment,null,this.props.layers.length>0?r.a.createElement("form",{className:this.props.classes.container,autoComplete:"off",id:"myform"},r.a.createElement(qe.c,{id:"standard-select-currency",select:!0,label:"Layer",className:this.props.classes.textField,value:this.state.layer,onChange:this.handleChange("layer"),SelectProps:{MenuProps:{className:this.props.classes.menu}},helperText:"Select layer",margin:"normal"},this.props.layers.map(function(e){return r.a.createElement(tt.a,{key:e.id,value:e.id},e.name)})),r.a.createElement(qe.c,{id:"standard-name",label:"Buffer",className:this.props.classes.textField,onChange:this.updateText("bufferVal"),margin:"normal",helperText:"Value in meter"}),r.a.createElement("div",null,e)):r.a.createElement(r.a.Fragment,null,r.a.createElement(qe.b,null,r.a.createElement(nt.a,null)),r.a.createElement(qe.d,{variant:"h7",color:"inherit"},"Add layers in map.")))}}]),t}(n.Component),it={addLayer:E},ot=Object(v.b)(function(e){return{layers:e.layers}},it)(Object(D.withStyles)(function(e){return{container:{display:"flex",flexWrap:"wrap"},textField:{marginLeft:e.spacing.unit,marginRight:e.spacing.unit,width:200},dense:{marginTop:19},menu:{width:200}}})(lt)),st=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).handleChange=function(e){return function(t){a.setState(Object(S.a)({},e,t.target.value))}},a.state={layer1:null,layer2:null},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"submitDifference",value:function(){var e=this;if(null==this.state||null==this.state.layer1||null==this.state.layer2)alert("Velg to lag til kalkulering");else if(this.state.layer1==this.state.layer2)alert("Lag 1 og Lag 2 m\xe5 v\xe6re forskjellige");else{var t=this.props.layers.filter(function(t){return t.id==e.state.layer1})[0],a=this.props.layers.filter(function(t){return t.id==e.state.layer2})[0],n=rt.difference(t.features[0],a.features[0]);if(null!=n){var r=t.name+"_"+a.name+"_Difference";this.props.addLayer(O(n,r,!0,.5)),this.props.close()}}}},{key:"render",value:function(){var e=[r.a.createElement(qe.a,{primary:!0,form:"myform",onClick:this.submitDifference.bind(this)},"SUBMIT")];return r.a.createElement(r.a.Fragment,null,this.props.layers.length>0?r.a.createElement("form",{className:this.props.classes.container,autoComplete:"off",id:"myform"},r.a.createElement(qe.c,{id:"layer1-select",select:!0,label:"Layer 1",className:this.props.classes.textField,value:this.state.layer1,onChange:this.handleChange("layer1"),SelectProps:{MenuProps:{className:this.props.classes.menu}},helperText:"Select layer",margin:"normal"},this.props.layers.map(function(e){return r.a.createElement(tt.a,{key:e.id,value:e.id},e.name)})),r.a.createElement(qe.c,{id:"layer2-select",select:!0,label:"Layer 2",className:this.props.classes.textField,value:this.state.layer2,onChange:this.handleChange("layer2"),SelectProps:{MenuProps:{className:this.props.classes.menu}},helperText:"Select layer",margin:"normal"},this.props.layers.filter(function(e){return"Polygon"==e.features[0].geometry.type||"MultiPolygon"==e.features[0].geometry.type}).map(function(e){return r.a.createElement(tt.a,{key:e.id,value:e.id},e.name)})),r.a.createElement("div",null,e)):r.a.createElement(r.a.Fragment,null,r.a.createElement(qe.b,null,r.a.createElement(nt.a,null)),r.a.createElement(qe.d,{variant:"h7",color:"inherit"},"Add layers in map.")))}}]),t}(n.Component),ct={addLayer:E},ut=Object(v.b)(function(e){return{layers:e.layers}},ct)(Object(D.withStyles)(function(e){return{container:{display:"flex",flexWrap:"wrap"},textField:{marginLeft:e.spacing.unit,marginRight:e.spacing.unit,width:200},dense:{marginTop:19},menu:{width:200}}})(st)),pt=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).handleChange=function(e){return function(t){a.setState(Object(S.a)({},e,t.target.value))}},a.state={layer:null},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"submitDifference",value:function(){var e=this;if(null==this.state.layer)alert("Velg et lag til \xe5 lage voronoi");else{var t=this.props.layers.filter(function(t){return t.id==e.state.layer})[0],a=rt.voronoi(t),n=t.name+"_voronoi";this.props.addLayer(O(a,n,!0,.5)),this.props.close()}}},{key:"render",value:function(){var e=[r.a.createElement(qe.a,{primary:!0,form:"myform",onClick:this.submitDifference.bind(this)},"SUBMIT")];return r.a.createElement(r.a.Fragment,null,this.props.layers.length>0?r.a.createElement("form",{className:this.props.classes.container,autoComplete:"off",id:"myform"},r.a.createElement(qe.c,{id:"layer1-select",select:!0,label:"Layer 1",className:this.props.classes.textField,value:this.state.layer1,onChange:this.handleChange("layer"),SelectProps:{MenuProps:{className:this.props.classes.menu}},helperText:"Select layer",margin:"normal"},this.props.layers.filter(function(e){return"Point"==e.features[0].geometry.type}).map(function(e){return r.a.createElement(tt.a,{key:e.id,value:e.id},e.name)})),r.a.createElement("div",null,e)):r.a.createElement(r.a.Fragment,null,r.a.createElement(qe.b,null,r.a.createElement(nt.a,null)),r.a.createElement(qe.d,{variant:"h7",color:"inherit"},"Add layers in map.")))}}]),t}(n.Component),dt={addLayer:E},mt=Object(v.b)(function(e){return{layers:e.layers}},dt)(Object(D.withStyles)(function(e){return{container:{display:"flex",flexWrap:"wrap"},textField:{marginLeft:e.spacing.unit,marginRight:e.spacing.unit,width:200},dense:{marginTop:19},menu:{width:200}}})(pt)),yt=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).handleChange=function(e){return function(t){a.setState(Object(S.a)({},e,t.target.value))}},a.state={layer1:null,layer2:null},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"submitWithin",value:function(){var e=this;if(null==this.state||null==this.state.layer1||null==this.state.layer2)alert("Velg to lag til kalkulering");else{var t=this.props.layers.filter(function(t){return t.id==e.state.layer1})[0],a=this.props.layers.filter(function(t){return t.id==e.state.layer2})[0],n=rt.pointsWithinPolygon(t,a);if(null!=n){var r=t.name+"_"+a.name+"_Within";this.props.addLayer(O(n,r,!0,.5)),this.props.close()}}}},{key:"render",value:function(){var e=[r.a.createElement(qe.a,{primary:!0,form:"myform",onClick:this.submitWithin.bind(this)},"SUBMIT")];return r.a.createElement(r.a.Fragment,null,this.props.layers.length>0?r.a.createElement("form",{className:this.props.classes.container,autoComplete:"off",id:"myform"},r.a.createElement(qe.c,{id:"layer1-select",select:!0,label:"Layer 1",className:this.props.classes.textField,value:this.state.layer1,onChange:this.handleChange("layer1"),SelectProps:{MenuProps:{className:this.props.classes.menu}},helperText:"Select point-layer",margin:"normal"},this.props.layers.filter(function(e){return"Point"==e.features[0].geometry.type}).map(function(e){return r.a.createElement(tt.a,{key:e.id,value:e.id},e.name)})),r.a.createElement(qe.c,{id:"layer2-select",select:!0,label:"Layer 2",className:this.props.classes.textField,value:this.state.layer2,onChange:this.handleChange("layer2"),SelectProps:{MenuProps:{className:this.props.classes.menu}},helperText:"Select layer",margin:"normal"},this.props.layers.filter(function(e){return"Polygon"==e.features[0].geometry.type||"MultiPolygon"==e.features[0].geometry.type}).map(function(e){return r.a.createElement(tt.a,{key:e.id,value:e.id},e.name)})),r.a.createElement("div",null,e)):r.a.createElement(r.a.Fragment,null,r.a.createElement(qe.b,null,r.a.createElement(nt.a,null)),r.a.createElement(qe.d,{variant:"h7",color:"inherit"},"Add layers in map.")))}}]),t}(n.Component),ht={addLayer:E},ft=Object(v.b)(function(e){return{layers:e.layers}},ht)(Object(D.withStyles)(function(e){return{container:{display:"flex",flexWrap:"wrap"},textField:{marginLeft:e.spacing.unit,marginRight:e.spacing.unit,width:200},dense:{marginTop:19},menu:{width:200}}})(yt)),gt=(a(676),function(e){return"MultiPolygon"==e.features[0].geometry.type}),bt=function(e){var t=[];return e.features.forEach(function(e){"MultiPolygon"==e.geometry.type&&e.geometry.coordinates.forEach(function(e){var a=rt.polygon(e);t.push(a)})}),t},vt=function(e,t,a,n,r){var l={type:"FeatureCollection",features:[]};!r&&gt(e)&&(e.features=bt(e)),!r&&gt(t)&&(t.features=bt(t)),e.features.forEach(function(e){t.features.forEach(function(t){var n=a(e.geometry,t.geometry);null!=n&&l.features.push(n)})});var i=e.name+"_"+t.name+"_"+n;return O(l,i,!0,.5)},Et=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).handleChange=function(e){return function(t){a.setState(Object(S.a)({},e,t.target.value))}},a.state={layer1:null,layer2:null},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"submitDifference",value:function(){var e=this;null==this.state.layer1||null==this.state.layer2?alert("Velg to lag til utregning."):this.state.layer1==this.state.layer2&&alert("Vennligst velg 2 forskjellige lag.");var t=this.props.layers.filter(function(t){return t.id==e.state.layer1})[0],a=this.props.layers.filter(function(t){return t.id==e.state.layer2})[0],n=vt(t,a,rt.intersect,"intersection");1==n.features.length&&null==n.features[0]?alert("Det er ingen overlapp mellom valgte lag."):(this.props.addLayer(O(n)),this.props.close())}},{key:"render",value:function(){var e=[r.a.createElement(qe.a,{primary:!0,form:"myform",onClick:this.submitDifference.bind(this)},"SUBMIT")];return r.a.createElement(r.a.Fragment,null,this.props.layers.length>0?r.a.createElement("form",{className:this.props.classes.container,autoComplete:"off",id:"myform"},r.a.createElement(qe.c,{id:"layer1-select",select:!0,label:"Layer 1",className:this.props.classes.textField,value:this.state.layer1,onChange:this.handleChange("layer1"),SelectProps:{MenuProps:{className:this.props.classes.menu}},helperText:"Select layer",margin:"normal"},this.props.layers.filter(function(e){return"Polygon"==e.features[0].geometry.type||"MultiPolygon"==e.features[0].geometry.type}).map(function(e){return r.a.createElement(tt.a,{key:e.id,value:e.id},e.name)})),r.a.createElement(qe.c,{id:"layer2-select",select:!0,label:"Layer 2",className:this.props.classes.textField,value:this.state.layer2,onChange:this.handleChange("layer2"),SelectProps:{MenuProps:{className:this.props.classes.menu}},helperText:"Select layer",margin:"normal"},this.props.layers.filter(function(e){return"Polygon"==e.features[0].geometry.type||"MultiPolygon"==e.features[0].geometry.type}).map(function(e){return r.a.createElement(tt.a,{key:e.id,value:e.id},e.name)})),r.a.createElement("div",null,e)):r.a.createElement(r.a.Fragment,null,r.a.createElement(qe.b,null,r.a.createElement(nt.a,null)),r.a.createElement(qe.d,{variant:"h7",color:"inherit"},"Add layers in map.")))}}]),t}(n.Component),Ct={addLayer:E},Lt=Object(v.b)(function(e){return{layers:e.layers}},Ct)(Object(D.withStyles)(function(e){return{container:{display:"flex",flexWrap:"wrap"},textField:{marginLeft:e.spacing.unit,marginRight:e.spacing.unit,width:200},dense:{marginTop:19},menu:{width:200}}})(Et)),Ot=(a(648),a(85)),jt=a.n(Ot),wt=[{value:"Within",icon:r.a.createElement(jt.a,null)},{value:"Buffer",icon:r.a.createElement(jt.a,null)},{value:"Intersection",icon:r.a.createElement(jt.a,null)},{value:"Difference",icon:r.a.createElement(jt.a,null)}],kt=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={layersInMap:[]},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"buttonClick",value:function(e,t){console.log(t),this.props.btnClicked(t)}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,wt.map(function(t){return r.a.createElement(ne.a,{id:t.value,onClick:function(a){return e.buttonClick(a,t.value)}},r.a.createElement(le.a,null,t.icon),r.a.createElement(oe.a,{primary:t.value}))}))}}]),t}(n.Component);var St=Object(D.withStyles)(function(e){return{root:{borderBottom:"1px solid ".concat(e.palette.divider),margin:0,padding:2*e.spacing.unit},closeButton:{position:"absolute",right:e.spacing.unit,top:e.spacing.unit,color:e.palette.grey[500]}}})(function(e){var t=e.children,a=e.classes,n=e.onClose;return r.a.createElement(Ye.a,{disableTypography:!0,className:a.root},r.a.createElement(R.a,{variant:"h6"},t),n?r.a.createElement(U.a,{"aria-label":"Close",className:a.closeButton,onClick:n},r.a.createElement(Ze.a,null)):null)}),xt=Object(D.withStyles)(function(e){return{root:{margin:0,padding:2*e.spacing.unit}}})(ze.a),Nt=(Object(D.withStyles)(function(e){return{root:{borderTop:"1px solid ".concat(e.palette.divider),margin:0,padding:e.spacing.unit}}})(Je.a),function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,l=new Array(n),i=0;i<n;i++)l[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(l)))).state={open:!1,selectedTool:null},a.handleClickOpen=function(){a.setState({open:!0})},a.handleClose=function(){a.setState({open:!1,selectedTool:null})},a.ButtonClicked=function(e){a.setState({selectedTool:e})},a.getContent=function(){switch(a.state.selectedTool){case"Within":return r.a.createElement(ne.a,null,r.a.createElement(ft,{close:a.handleClose}));case"Buffer":return r.a.createElement(ne.a,null,r.a.createElement(ot,{close:a.handleClose}));case"Intersection":return r.a.createElement(ne.a,null,r.a.createElement(Lt,{close:a.handleClose}));case"Difference":return r.a.createElement(ne.a,null,r.a.createElement(ut,{close:a.handleClose}));case"Voronoi":return r.a.createElement(ne.a,null,r.a.createElement(mt,{close:a.handleClose}));default:return r.a.createElement(kt,{btnClicked:a.ButtonClicked})}},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement("div",null,r.a.createElement(Xe.a,{color:"secondary","aria-label":"Edit",className:e.fab,onClick:this.handleClickOpen},r.a.createElement($e.a,null)),r.a.createElement(Ve.a,{onClose:this.handleClose,"aria-labelledby":"customized-dialog-title",open:this.state.open},r.a.createElement(St,{id:"customized-dialog-title",onClose:this.handleClose},"Tools"),r.a.createElement(xt,null,r.a.createElement(q.a,{component:"nav"},this.getContent()))))}}]),t}(r.a.Component)),Pt=Object(D.withStyles)(function(e){return{fab:{margin:e.spacing.unit,float:"right",bottom:"80px"},extendedIcon:{marginRight:e.spacing.unit}}})(Nt);function Dt(){var e=Object(d.a)(["\n  display: flex;\n  flex-direction: row;\n  min-height: 100vh;\n  align-items: stretch;\n"]);return Dt=function(){return e},e}var Ft=m.a.div(Dt()),Tt=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={receivedJson:a.props.receivedJson,layers:[]},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"updateMapLayers",value:function(e){this.setState({layers:e})}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(Be,{updateMapLayers:this.updateMapLayers.bind(this)}),r.a.createElement(Ft,null,r.a.createElement(k,null)),r.a.createElement(Pt,null))}}]),t}(n.Component),It=a(69),_t=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Mt(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}var At=a(166),Bt=[],Rt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Bt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_LAYER":return[].concat(Object(At.a)(e.slice(0,e.length)),[t.layer],Object(At.a)(e.slice(e.length)));case"DELETE_LAYER":return e.filter(function(e){return e.id!=t.layer});case"UPDATE_LAYER_FILL":return e.map(function(e){return e.id===t.layerID?Object(x.a)({},e,{fillColor:t.fillColor}):e});case"UPDATE_LAYER_BORDER":return e.map(function(e){return e.id===t.layerID?Object(x.a)({},e,{borderColor:t.borderColor}):e});case"UPDATE_LAYER_VISIBILITY":return e.map(function(e){return e.id===t.layerID?Object(x.a)({},e,{visible:t.visibility}):e});case"UPDATE_LAYER_NAME":return e.map(function(e){return e.id===t.layerID?Object(x.a)({},e,{name:t.name}):e});case"TOGGLE_TODO":return e.map(function(e){return e.id===t.id?Object(x.a)({},e,{completed:!e.completed}):e});default:return e}},Vt=Object(It.b)({layers:Rt}),Wt=Object(It.c)(Vt);i.a.render(r.a.createElement(v.a,{store:Wt},r.a.createElement(Tt,null)),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/Gislyfe",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("/Gislyfe","/service-worker.js");_t?function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):Mt(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e):Mt(e)})}}()}},[[326,1,2]]]);
//# sourceMappingURL=main.9f40d4f6.chunk.js.map